---
phase: 30-harmonisation-equipment---routing-cohérent
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/client/src/pages/EquipmentCreate.tsx
  - packages/client/src/components/EquipmentEditForm.tsx
  - packages/client/src/pages/Equipment.tsx
  - packages/client/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User can navigate to /equipment/new from Equipment list page"
    - "User can create equipment via dedicated page (not inline form)"
    - "EquipmentCreate page uses accordion-based form (consistent with 11 other resources)"
    - "Form state persists in localStorage across sessions"
    - "Alt+Click toggles all accordions (power-user feature)"
    - "Creating equipment returns to /equipment list page with success toast"
  artifacts:
    - path: "packages/client/src/pages/EquipmentCreate.tsx"
      provides: "Dedicated create page for equipment"
      min_lines: 100
    - path: "packages/client/src/components/EquipmentEditForm.tsx"
      provides: "Accordion-based form component (4 sections)"
      min_lines: 250
      exports: ["EquipmentEditForm"]
    - path: "packages/client/src/App.tsx"
      provides: "Route registration for /equipment/new"
      contains: 'path="equipment/new"'
    - path: "packages/client/src/pages/Equipment.tsx"
      provides: "Updated button navigation (Link not onClick)"
      pattern: 'Button asChild.*Link to="/equipment/new"'
  key_links:
    - from: "packages/client/src/pages/Equipment.tsx"
      to: "/equipment/new"
      via: "Button with asChild + Link"
      pattern: '<Button asChild>.*<Link to="/equipment/new">'
    - from: "packages/client/src/pages/EquipmentCreate.tsx"
      to: "EquipmentEditForm"
      via: "Import and render"
      pattern: 'import.*EquipmentEditForm.*from.*@/components/EquipmentEditForm'
    - from: "packages/client/src/components/EquipmentEditForm.tsx"
      to: "localStorage"
      via: "Accordion state persistence"
      pattern: "localStorage\\.(get|set)Item\\('equipmentEditAccordions'"
---

<objective>
Apply the established harmonization pattern (Phases 22-29) to Equipment by converting EquipmentCreate.tsx from inline form to accordion-based component with dedicated `/equipment/new` route.

Purpose: Achieve routing consistency across all 12 resources (clients, sessions, invoices, equipment, rooms, projects, quotes, contracts, expenses, talents, tracks, services). This enables bookmarkable URLs, shareable links, and eliminates cognitive friction from mixed interaction patterns.

Output: EquipmentCreate.tsx page (120 lines) with EquipmentEditForm component (280 lines), updated Equipment.tsx button navigation, route registration in App.tsx. Zero new dependencies—all patterns copied from TalentEditForm (Phase 28) and ServiceEditForm (Phase 29).
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Pattern references (established in Phases 26-29)
@packages/client/src/pages/TalentCreate.tsx
@packages/client/src/components/TalentEditForm.tsx
@packages/client/src/pages/ServiceCreate.tsx
@packages/client/src/components/ServiceEditForm.tsx

# Current implementation (inline form to convert)
@packages/client/src/pages/EquipmentCreate.tsx

# Equipment schema reference
@packages/database/src/tenant/schema.ts

# Routing structure
@packages/client/src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert EquipmentCreate.tsx to use accordion pattern</name>
  <files>packages/client/src/pages/EquipmentCreate.tsx</files>
  <action>
Convert EquipmentCreate.tsx from inline form (current 220 lines) to accordion-based pattern following TalentCreate.tsx structure.

**Current state:** EquipmentCreate.tsx has inline form with all fields in single Card (lines 84-217)

**Target state:** Page with header + EquipmentEditForm component (accordion-based)

**Step 1: Update imports (lines 1-12):**
```typescript
// Keep existing imports
import { useState } from "react";
import { useNavigate, Link } from "react-router-dom";
import { Button } from "@/components/ui/button";
import { trpc } from "@/lib/trpc";
import { ArrowLeft, Save, Wrench } from "lucide-react";
import { toast } from "sonner";

// Add new import
import { EquipmentEditForm } from "@/components/EquipmentEditForm";

// Remove no longer needed (will be in EquipmentEditForm):
// - Card, CardContent, CardDescription, CardHeader, CardTitle
// - Input, Label, Textarea, Select components
```

**Step 2: Update formData state (lines 31-39):**
Expand to include ALL equipment fields from schema (14 fields):
```typescript
const [formData, setFormData] = useState({
  // Identity
  name: "",
  brand: "",
  model: "",
  serialNumber: "",

  // Category & Assignment
  category: "microphone" as const,
  roomId: 0,

  // Details
  description: "",
  specifications: "",

  // Financial
  purchaseDate: "",
  purchasePrice: "",
  warrantyUntil: "",

  // Status
  status: "operational" as const,
  condition: "good" as const,

  // Maintenance
  lastMaintenanceAt: "",
  nextMaintenanceAt: "",
  maintenanceNotes: "",
});
```

**Step 3: Update mutation navigation (line 23):**
```typescript
// BEFORE:
navigate(`/equipment/${data.id}`);

// AFTER:
navigate("/equipment");
```
**Reason:** Match established pattern (return to list page after create, not detail page)

**Step 4: Simplify form rendering (lines 82-217):**
Replace entire Card form with:
```tsx
<form onSubmit={handleSubmit}>
  <EquipmentEditForm formData={formData} setFormData={setFormData} />

  {/* Action buttons */}
  <div className="flex gap-3 pt-4">
    <Button type="submit" disabled={createMutation.isPending}>
      <Save className="mr-2 h-4 w-4" />
      {createMutation.isPending ? "Création..." : "Créer l'équipement"}
    </Button>
    <Button type="button" variant="outline" asChild>
      <Link to="/equipment">Annuler</Link>
    </Button>
  </div>
</form>
```

**Step 5: Update handleSubmit validation (lines 41-60):**
Keep existing validation logic but ensure all 14 fields are passed to mutation (not just 7):
```typescript
createMutation.mutate({
  // Identity
  name: formData.name,
  brand: formData.brand || undefined,
  model: formData.model || undefined,
  serialNumber: formData.serialNumber || undefined,

  // Category & Assignment
  category: formData.category,
  roomId: formData.roomId || undefined,

  // Details
  description: formData.description || undefined,
  specifications: formData.specifications || undefined,

  // Financial
  purchaseDate: formData.purchaseDate || undefined,
  purchasePrice: formData.purchasePrice || undefined,
  warrantyUntil: formData.warrantyUntil || undefined,

  // Status
  status: formData.status,
  condition: formData.condition,

  // Maintenance
  lastMaintenanceAt: formData.lastMaintenanceAt || undefined,
  nextMaintenanceAt: formData.nextMaintenanceAt || undefined,
  maintenanceNotes: formData.maintenanceNotes || undefined,
});
```

**Pattern source:** TalentCreate.tsx lines 1-108 (Phase 28), ServiceCreate.tsx (Phase 29)

**Expected output:** ~120 lines (reduced from 220 by moving form fields to component)
  </action>
  <verify>
File EquipmentCreate.tsx updated with:
- Import statement: import { EquipmentEditForm } from "@/components/EquipmentEditForm"
- formData state with 14 fields matching equipment schema
- handleSubmit passes all 14 fields to createMutation
- Form renders <EquipmentEditForm formData={formData} setFormData={setFormData} />
- Action buttons in footer (Submit + Cancel with Link to /equipment)
- Navigation on success: navigate("/equipment")
- File reduced to ~120 lines (from 220)

Run: grep -E "(EquipmentEditForm|navigate\(\"/equipment\"\))" packages/client/src/pages/EquipmentCreate.tsx
Expected: 2+ matches

Run: wc -l packages/client/src/pages/EquipmentCreate.tsx
Expected: ~120 lines (significant reduction from 220)
  </verify>
  <done>
EquipmentCreate.tsx converted to accordion pattern. File reduced from 220 to ~120 lines. All form fields moved to EquipmentEditForm component. formData state includes all 14 equipment fields. Navigation returns to /equipment list page. TypeScript compiles with 0 errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create EquipmentEditForm accordion component</name>
  <files>packages/client/src/components/EquipmentEditForm.tsx</files>
  <action>
Create accordion-based form component at packages/client/src/components/EquipmentEditForm.tsx.

**Copy TalentEditForm.tsx structure (lines 1-299) with Equipment-specific adaptations:**

1. **Imports:** Same as TalentEditForm (useState, useEffect, Card, Accordion components, Input, Textarea, Label, Select, icons)

2. **Interface:**
```typescript
interface EquipmentEditFormProps {
  formData: any;
  setFormData: (data: any) => void;
}
```

3. **Accordion state with localStorage (lines 36-52 from TalentEditForm):**
   - Key: 'equipmentEditAccordions' (unique to equipment)
   - Default open: ["identite", "details", "financial", "maintenance"] (4 accordions)
   - useEffect to save state on change

4. **Alt+Click toggle handler (lines 54-69 from TalentEditForm):**
   - allAccordions = ["identite", "details", "financial", "maintenance"]
   - Toggle all open/closed logic

5. **Accordion structure (4 sections):**

**Accordion 1: Identité de l'Équipement**
- Icon: Wrench (import from lucide-react)
- Fields (7):
  - name: Input (maxLength 255, required asterisk)
  - category: Select (microphone/preamp/interface/outboard/instrument/monitoring/computer/cable/accessory/other, required asterisk)
  - brand: Input (maxLength 100, optional)
  - model: Input (maxLength 100, optional)
  - serialNumber: Input (maxLength 100, optional)
  - roomId: Select with rooms query (optional, "Aucune" default)
  - description: Textarea (rows 3, optional)

**Accordion 2: Spécifications Techniques**
- Icon: FileText (import from lucide-react)
- Fields (2):
  - specifications: Textarea (rows 4, optional, placeholder: "Spécifications techniques (format libre ou JSON)")
  - condition: Select (excellent/good/fair/poor, required asterisk, default "good")

**Accordion 3: Informations Financières**
- Icon: DollarSign (import from lucide-react)
- Fields (3):
  - purchaseDate: Input type="date" (optional)
  - purchasePrice: Input type="number" step="0.01" min="0" (optional, placeholder "Prix d'achat")
  - warrantyUntil: Input type="date" (optional, label "Garantie jusqu'au")

**Accordion 4: Maintenance & Statut**
- Icon: Settings (import from lucide-react)
- Fields (4):
  - status: Select (operational/maintenance/out_of_service/rented, required asterisk, default "operational")
  - lastMaintenanceAt: Input type="date" (optional, label "Dernière maintenance")
  - nextMaintenanceAt: Input type="date" (optional, label "Prochaine maintenance")
  - maintenanceNotes: Textarea (rows 3, optional, placeholder "Notes de maintenance")

6. **Rooms query (for roomId select):**
```typescript
const { data: rooms } = trpc.rooms.list.useQuery();
```

7. **Category options (from schema):**
```typescript
const categories = [
  { value: "microphone", label: "Microphone" },
  { value: "preamp", label: "Préampli" },
  { value: "interface", label: "Interface" },
  { value: "outboard", label: "Outboard" },
  { value: "instrument", label: "Instrument" },
  { value: "monitoring", label: "Monitoring" },
  { value: "computer", label: "Ordinateur" },
  { value: "cable", label: "Câble" },
  { value: "accessory", label: "Accessoire" },
  { value: "other", label: "Autre" },
];
```

8. **Status options:**
```typescript
const statuses = [
  { value: "operational", label: "Opérationnel" },
  { value: "maintenance", label: "En maintenance" },
  { value: "out_of_service", label: "Hors service" },
  { value: "rented", label: "Loué" },
];
```

9. **Condition options:**
```typescript
const conditions = [
  { value: "excellent", label: "Excellent" },
  { value: "good", label: "Bon" },
  { value: "fair", label: "Correct" },
  { value: "poor", label: "Mauvais" },
];
```

10. **Card wrapper:** Each AccordionItem wrapped in <Card> for visual consistency

11. **Trigger onClick:** Pass handleAccordionTriggerClick to enable Alt+Click

**Pattern source:** TalentEditForm.tsx lines 1-299 (Phase 28), ServiceEditForm.tsx (Phase 29)

**Expected output:** ~280 lines (TalentEditForm is 299 with 5 accordions, Equipment needs 4 with more fields per accordion)

**Important:** Use shadcn/ui Input component (not plain input) for consistency with rest of app. Import from "@/components/ui/input".
  </action>
  <verify>
File exists at packages/client/src/components/EquipmentEditForm.tsx with:
- Export: export function EquipmentEditForm
- localStorage key: 'equipmentEditAccordions'
- 4 accordion sections: "identite", "details", "financial", "maintenance"
- Accordion 1 contains: name, category, brand, model, serialNumber, roomId, description (7 fields)
- Accordion 2 contains: specifications, condition (2 fields)
- Accordion 3 contains: purchaseDate, purchasePrice, warrantyUntil (3 fields)
- Accordion 4 contains: status, lastMaintenanceAt, nextMaintenanceAt, maintenanceNotes (4 fields)
- Alt+Click handler implemented (allAccordions array with 4 items)
- Card wrapper on each AccordionItem
- trpc.rooms.list.useQuery() for roomId select

Run: grep -E "(equipmentEditAccordions|AccordionItem value=\"identite\"|AccordionItem value=\"details\"|AccordionItem value=\"financial\"|AccordionItem value=\"maintenance\")" packages/client/src/components/EquipmentEditForm.tsx
Expected: 5+ matches (localStorage key + 4 accordion values)

Run: grep "trpc.rooms.list.useQuery" packages/client/src/components/EquipmentEditForm.tsx
Expected: 1 match
  </verify>
  <done>
EquipmentEditForm.tsx exists with 4-accordion structure (Identity + Details + Financial + Maintenance). All 16 equipment fields present (14 from schema + status/condition). localStorage persistence configured. Alt+Click toggle handler implemented. Rooms query integrated for roomId select. Component exports EquipmentEditForm function. TypeScript compiles with 0 errors.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update Equipment.tsx button navigation</name>
  <files>packages/client/src/pages/Equipment.tsx</files>
  <action>
Update Equipment.tsx to navigate to /equipment/new instead of opening Dialog modal.

**Step 1: Find "Nouvel équipement" button (around line 238-248):**
Current pattern likely uses onClick to open Dialog or navigate directly.

**Step 2: Replace with Link navigation pattern:**
```typescript
// AFTER:
<Button asChild>
  <Link to="/equipment/new">
    <Plus className="mr-2 h-4 w-4" />
    Nouvel équipement
  </Link>
</Button>
```

**Step 3: Verify Link is imported (line 36):**
```typescript
import { Link } from "react-router-dom";
```
Already present - no change needed.

**Pattern reference:** Equipment.tsx already uses Link elsewhere (line 36), so just need to update button pattern.

**Important:** Do NOT remove Dialog code if it's used for EDIT functionality. Only update CREATE button navigation.
  </action>
  <verify>
Equipment.tsx changes verified:
1. Button with "Nouvel équipement" text now uses: <Button asChild><Link to="/equipment/new">
2. Link import exists (line 36)
3. File compiles with TypeScript 0 errors

Run: grep -A 3 'Nouvel équipement' packages/client/src/pages/Equipment.tsx
Expected: Shows Button asChild with Link to="/equipment/new"

Run: grep 'to="/equipment/new"' packages/client/src/pages/Equipment.tsx
Expected: 1 match (button navigation)
  </verify>
  <done>
Equipment.tsx updated: "Nouvel équipement" button navigates to /equipment/new via Link. Button uses asChild pattern. File compiles successfully. List page functionality preserved.
  </done>
</task>

<task type="auto">
  <name>Task 4: Register /equipment/new route in App.tsx</name>
  <files>packages/client/src/App.tsx</files>
  <action>
Add route for /equipment/new in App.tsx following established pattern.

**Step 1: Find existing EquipmentCreate import:**
The import likely already exists since EquipmentCreate.tsx already exists as a page. Verify:
```typescript
import EquipmentCreate from './pages/EquipmentCreate';
```
If missing, add it after Equipment import.

**Step 2: Find existing equipment route (around line 148-160):**
Look for:
```typescript
<Route path="equipment" element={<Equipment />} />
```

**Step 3: Check if /equipment/new route already exists:**
Since EquipmentCreate.tsx already exists as a page, the route might already be registered. If it exists, verify it's correct:
```typescript
<Route path="equipment/new" element={<EquipmentCreate />} />
```

**Step 4: If route doesn't exist, add it immediately after equipment list route:**
```typescript
<Route path="equipment" element={<Equipment />} />
<Route path="equipment/new" element={<EquipmentCreate />} />
```

**Pattern reference:** Talents routes (Phase 28), Services routes (Phase 29):
- List route: `<Route path="talents" element={<Talents />} />`
- Create route: `<Route path="talents/new" element={<TalentCreate />} />`

**Important:** Ensure route is INSIDE the same parent Route as the list route (under ProtectedRoute > Layout).
  </action>
  <verify>
App.tsx changes verified:
1. Import exists: import EquipmentCreate from './pages/EquipmentCreate'
2. Route exists: <Route path="equipment/new" element={<EquipmentCreate />} />
3. Route is sibling to <Route path="equipment" element={<Equipment />} />
4. Both routes inside same parent (ProtectedRoute > Layout)

Run: grep -A 1 'path="equipment"' packages/client/src/App.tsx
Expected: 2 matches (equipment list route + equipment/new route)

Run: grep 'EquipmentCreate' packages/client/src/App.tsx
Expected: 2 matches (import + route element)
  </verify>
  <done>
App.tsx verified with /equipment/new route. EquipmentCreate component imported. Route registered as sibling to /equipment list route. TypeScript compiles with 0 errors. Navigation flow complete: Equipment list → /equipment/new → EquipmentCreate page.
  </done>
</task>

<task type="auto">
  <name>Task 5: Build verification and type checking</name>
  <files>N/A</files>
  <action>
Verify all changes compile successfully and maintain type safety.

**Step 1: Type check all packages**
Run: `pnpm check`
Expected: 0 TypeScript errors across all packages

**Step 2: Build client package**
Run: `pnpm --filter client build`
Expected: Build succeeds with 0 errors, dist/ directory created

**Step 3: Verify imports resolve**
Check that EquipmentEditForm is imported correctly in EquipmentCreate:
Run: `grep "EquipmentEditForm" packages/client/src/pages/EquipmentCreate.tsx`
Expected: Import statement matches export from EquipmentEditForm.tsx

**Step 4: Verify route exists**
Run: `grep -C 2 "equipment/new" packages/client/src/App.tsx`
Expected: Route with EquipmentCreate element visible

**Step 5: Verify field count**
Run: `grep -o "formData\." packages/client/src/components/EquipmentEditForm.tsx | wc -l`
Expected: 40+ matches (16 fields × ~3 references each = value binding, onChange, placeholder/label)

**If errors occur:**
- Import path issues: Verify @/components alias works
- Type errors: Check formData interface matches between EquipmentCreate and EquipmentEditForm
- Build errors: Run `pnpm install` if missing dependencies

**Pattern verification checklist:**
- [ ] EquipmentCreate page reduced from 220 to ~120 lines
- [ ] EquipmentEditForm has 4 accordions (Identity, Details, Financial, Maintenance)
- [ ] localStorage key is unique ('equipmentEditAccordions')
- [ ] Alt+Click handler present in EquipmentEditForm
- [ ] Equipment.tsx button uses asChild + Link pattern
- [ ] Route registered in App.tsx
- [ ] All 16 equipment fields present in form
  </action>
  <verify>
Run: pnpm check
Expected: "✓ Checked N files in Xms" with 0 errors

Run: pnpm --filter client build
Expected: "dist/index.html" created, build size reported, 0 errors

Run: ls packages/client/dist/
Expected: index.html, assets/ directory exist

Run: wc -l packages/client/src/pages/EquipmentCreate.tsx packages/client/src/components/EquipmentEditForm.tsx
Expected: ~120 lines (EquipmentCreate), ~280 lines (EquipmentEditForm)
  </verify>
  <done>
All TypeScript checks pass (0 errors). Client builds successfully. EquipmentCreate page reduced from 220 to ~120 lines. EquipmentEditForm component created (~280 lines). Routing changes compile without issues. Pattern verification complete: Equipment harmonization matches established pattern from Phases 22-29. Ready for manual testing.
  </done>
</task>

</tasks>

<verification>
**Automated verification:**
1. `pnpm check` passes with 0 TypeScript errors
2. `pnpm --filter client build` succeeds
3. EquipmentCreate.tsx reduced to ~120 lines (from 220)
4. EquipmentEditForm.tsx exists with 250+ lines
5. Equipment.tsx button uses Link navigation to /equipment/new
6. App.tsx contains route for /equipment/new

**Manual verification (user testing):**
1. Navigate to /equipment page
2. Click "Nouvel équipement" button
3. Verify navigation to /equipment/new (URL changes)
4. Verify EquipmentCreate page renders with:
   - Header: "Nouvel Équipement" with Wrench icon
   - Back button to /equipment
   - 4 accordion sections (Identity, Details, Financial, Maintenance)
   - All 16 fields present
   - Cancel button (returns to /equipment)
   - "Créer l'équipement" submit button
5. Test accordion interactions:
   - Click accordion headers to expand/collapse
   - Alt+Click on any header to toggle all accordions
6. Fill form with valid data (name + category minimum) and submit
7. Verify success toast appears
8. Verify navigation returns to /equipment list
9. Verify new equipment appears in table
10. Refresh page and return to /equipment/new
11. Verify accordion state persisted (same accordions open as before)

**Goal-backward verification (must_haves):**
- ✓ User can navigate to /equipment/new from list page (button + route exist)
- ✓ User can create equipment via dedicated page (EquipmentCreate page converted)
- ✓ Form uses accordion pattern (EquipmentEditForm has 4 AccordionItems)
- ✓ localStorage persistence (equipmentEditAccordions key used)
- ✓ Alt+Click toggle (handleAccordionTriggerClick handler present)
- ✓ Success flow returns to list (navigate("/equipment") in onSuccess)
</verification>

<success_criteria>
**Code artifacts:**
- [x] EquipmentCreate.tsx converted (reduced from 220 to ~120 lines)
- [x] EquipmentEditForm.tsx created (250-280 lines)
- [x] Equipment.tsx updated (button changed to Link)
- [x] App.tsx verified (route registered)

**Functional requirements:**
- [x] /equipment/new route accessible
- [x] EquipmentCreate page renders correctly
- [x] Form has 4 accordion sections (Identity + Details + Financial + Maintenance)
- [x] All 16 equipment fields present and functional
- [x] Validation works (required fields: name, category, status, condition)
- [x] Submit creates equipment via tRPC mutation
- [x] Success returns to /equipment list with toast
- [x] Error shows toast with message
- [x] Accordion state persists in localStorage
- [x] Alt+Click toggles all accordions

**Pattern consistency:**
- [x] Matches TalentCreate/TalentEditForm structure (Phase 28)
- [x] Matches ServiceCreate/ServiceEditForm structure (Phase 29)
- [x] Consistent with 11 other harmonized resources (Phases 22-29)
- [x] Bookmarkable URL (/equipment/new)
- [x] TypeScript strict mode passes (0 errors)

**Code quality:**
- [x] EquipmentCreate reduced by ~100 lines (220 → 120)
- [x] Form logic properly separated into component
- [x] All equipment fields from schema included
- [x] Rooms query integrated for roomId select
- [x] No unused imports or dead code

**Documentation:**
- Phase 30 harmonization complete
- Equipment now consistent with clients, sessions, invoices, rooms, projects, quotes, contracts, expenses, talents, tracks, services
- All 12 resources use dedicated `/resource/new` pages
- UI harmonization pattern fully established across all core resources
</success_criteria>

<output>
After completion, create `.planning/phases/30-harmonisation-equipment---routing-cohérent/30-01-SUMMARY.md` with:

**Frontmatter:**
- phase: 30-harmonisation-equipment---routing-cohérent
- plan: 01
- subsystem: ui-harmonization
- tags: [equipment, routing, accordion-form, ui-consistency]
- requires: Phase 29 (ServiceEditForm pattern)
- provides: EquipmentEditForm component, /equipment/new route, converted EquipmentCreate
- affects: Equipment module (complete harmonization)
- tech-stack.added: [] (zero new dependencies)
- tech-stack.patterns: [Accordion forms, localStorage persistence, Link navigation]
- key-files.created: [EquipmentEditForm.tsx]
- key-files.modified: [EquipmentCreate.tsx, Equipment.tsx, App.tsx]
- decisions: [Use 4 accordions for equipment complexity, Copy TalentEditForm pattern, Integrate rooms query]
- metrics: duration, completed date, tasks 5/5, commits 1

**Summary sections:**
1. **What Was Built:** EquipmentEditForm component with 4 accordions, EquipmentCreate conversion, routing update
2. **Key Changes:** List 5 tasks with files modified and line counts
3. **Pattern Application:** How TalentEditForm pattern was adapted to Equipment (4 accordions, 16 fields)
4. **Technical Decisions:** Why 4 accordions, field grouping logic, rooms integration
5. **Verification Results:** TypeScript 0 errors, build success, manual testing outcomes
6. **Next Steps:** All 12 core resources harmonized - pattern complete

**Include in summary:**
- Total lines added: ~280 (EquipmentEditForm)
- Total lines removed/refactored: ~100 (inline form in EquipmentCreate)
- Net change: +180 lines
- Code quality: Better separation of concerns, reusable form component
- Pattern consistency: 12/12 resources now harmonized
- UI/UX improvement: Accordion organization, localStorage persistence, Alt+Click power feature
</output>
