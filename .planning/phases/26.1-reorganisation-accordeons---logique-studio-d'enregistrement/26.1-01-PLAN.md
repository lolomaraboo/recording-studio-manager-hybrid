---
phase: 26.1-reorganisation-accordeons---logique-studio-d'enregistrement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/client/src/components/ClientEditForm.tsx
autonomous: true

must_haves:
  truths:
    - "User sees 5 accordion sections in edit mode (not 7)"
    - "Musical profile fields appear in 2nd accordion (Profil Artistique)"
    - "All contact info grouped in single accordion (Coordonnées)"
    - "Accordion order follows studio workflow (Identity → Artistic → Contact → Relations → Notes)"
    - "All existing fields remain accessible (zero data loss)"
  artifacts:
    - path: "packages/client/src/components/ClientEditForm.tsx"
      provides: "5-accordion edit form with studio workflow order"
      min_lines: 1000
      contains: "AccordionItem value=\"profil-artistique\""
  key_links:
    - from: "packages/client/src/components/ClientEditForm.tsx"
      to: "ClientDetailTabs informations tab"
      via: "isEditing conditional render"
      pattern: "isEditing \\? <ClientEditForm"
---

<objective>
Reorganize ClientEditForm from 7 scattered accordions to 5 studio workflow-aligned sections.

**Purpose:** Elevate musical profile to 2nd position (core business), reduce navigation by 28% (5 vs 7 sections), group logically related fields (contact, artistic profile).

**Output:** ClientEditForm.tsx with 5 accordion sections following studio workflow: Identité → Profil Artistique → Coordonnées → Relations Professionnelles → Notes Studio
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@packages/client/src/components/ClientEditForm.tsx
@.planning/phases/26-formulaire-client-accordeons/26-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restructure 7 accordions into 5 fused sections</name>
  <files>packages/client/src/components/ClientEditForm.tsx</files>
  <action>
**Refactor accordion structure from 7 to 5 sections:**

**Current structure (7 accordions):**
1. identity (lines 38-161) - Type, name, prefix, firstName, lastName, suffix, artistName
2. contact (lines 164-375) - Email, phone, emails[], phones[], websites[]
3. address (lines 378-565) - Address, street, city, postalCode, addresses[]
4. personal (lines 568-680) - Birthday, gender, customFields[]
5. streaming (lines 683-837) - 11 streaming platform URLs
6. professional (lines 840-909) - recordLabel, distributor, managerContact, publisher, performanceRightsSociety
7. career (lines 912-1003) - yearsActive, notableWorks, awardsRecognition, biography, genres[], instruments[]

**New structure (5 accordions):**

**1. Identité (keep as-is, rename heading)**
- value="identite"
- heading: "Identité"
- Fields: type, name, prefix, firstName, lastName, suffix, artistName (unchanged)

**2. Profil Artistique (FUSE: streaming + professional + career)**
- value="profil-artistique"
- heading: "Profil Artistique"
- Subsections with visual separation (border-t pt-3 mt-3):
  - **Genres & Instruments** (from career): genres[], instruments[]
  - **Streaming Platforms** (from streaming): spotifyUrl, appleMusicUrl, youtubeUrl, soundcloudUrl, bandcampUrl, deezerUrl, tidalUrl, amazonMusicUrl, audiomackUrl, beatportUrl, otherPlatformsUrl
  - **Informations Professionnelles** (from professional): recordLabel, distributor, managerContact, publisher, performanceRightsSociety
  - **Carrière** (from career): yearsActive, notableWorks, awardsRecognition, biography

**3. Coordonnées (FUSE: contact + address)**
- value="coordonnees"
- heading: "Coordonnées"
- Subsections with visual separation:
  - **Contact** (from contact): email, phone, emails[], phones[], websites[]
  - **Adresses** (from address): address, street, city, postalCode, region, country, addresses[]

**4. Relations Professionnelles (NEW - placeholder for company members)**
- value="relations-professionnelles"
- heading: "Relations Professionnelles"
- Content: Info message "Les relations professionnelles (membres d'entreprises) sont gérées dans l'onglet 'Informations' de la page de détail du client."
- Note: Company members are managed via CompanyMembersModal in ClientDetailTabs, not in edit form

**5. Notes Studio (RENAME: personal)**
- value="notes-studio"
- heading: "Notes Studio"
- Fields: birthday, gender, customFields[] (from personal)

**Implementation notes:**
- Use `<div className="border-t pt-3 mt-3">` to separate subsections within fused accordions
- Add `<h4 className="text-sm font-semibold mb-2">Subsection Title</h4>` for subsection headers
- Maintain all existing field implementations (no behavior changes)
- Update defaultValue array in Accordion component: `defaultValue={["identite", "profil-artistique", "coordonnees", "relations-professionnelles", "notes-studio"]}`
- All fields remain accessible, zero data loss
  </action>
  <verify>
**Manual verification checklist:**

1. **Accordion count:** Open edit mode, count accordion sections (must be 5, not 7)
2. **Profil Artistique 2nd position:** Verify musical profile is 2nd accordion
3. **Subsection visual separation:** Check border-t dividers in Profil Artistique and Coordonnées
4. **All fields accessible:** Click through all 5 accordions, verify all 50+ fields present
5. **TypeScript check:** `cd packages/client && pnpm exec tsc --noEmit` (0 errors)
6. **Production build:** `cd packages/client && pnpm build` (successful, no warnings)
  </verify>
  <done>
ClientEditForm.tsx has 5 accordion sections with studio workflow order. Musical profile (streaming + professional + career) fused into 2nd accordion. Contact info (emails, phones, addresses) fused into 3rd accordion. TypeScript 0 errors. Production build successful.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
**Task 1 automated:**
- Restructured ClientEditForm.tsx: 7 → 5 accordions
- Fused 3 music sections into "Profil Artistique" (2nd position)
- Fused contact + address into "Coordonnées"
- Added subsection visual separators
- Updated accordion labels and values

**What to verify:**
Complete UI/UX validation of reorganized accordion structure
  </what-built>
  <how-to-verify>
**1. Start development server:**
```bash
cd /Users/marabook_m1/Documents/APP_HOME/CascadeProjects/windsurf-project/recording-studio-manager-hybrid
./start.sh
```

**2. Open browser:** http://localhost:5174

**3. Login:**
- Email: admin@test-studio-ui.com
- Password: password

**4. Navigate to client edit mode:**
- Click "Clients" in sidebar
- Click any client (e.g., "Emma Dubois")
- Click "Modifier" button (top-right)

**5. Verify accordion structure:**
- [ ] Count 5 accordions (not 7)
- [ ] Accordion 1: "Identité" (type, name, artistName fields)
- [ ] Accordion 2: "Profil Artistique" (genres, streaming, professional, career)
- [ ] Accordion 3: "Coordonnées" (emails, phones, addresses)
- [ ] Accordion 4: "Relations Professionnelles" (info message)
- [ ] Accordion 5: "Notes Studio" (birthday, gender, custom fields)

**6. Verify Profil Artistique subsections:**
- [ ] Subsection "Genres & Instruments" with border-t separator
- [ ] Subsection "Streaming Platforms" with 11 platform fields
- [ ] Subsection "Informations Professionnelles" (label, distributor, manager, etc.)
- [ ] Subsection "Carrière" (years active, notable works, biography)

**7. Verify Coordonnées subsections:**
- [ ] Subsection "Contact" (email, phone, arrays with Plus/Trash2 icons)
- [ ] Subsection "Adresses" (address fields, addresses array)

**8. Verify all fields functional:**
- [ ] Type text in "Nom complet" (identity)
- [ ] Add genre "Rock" in Profil Artistique
- [ ] Add phone number in Coordonnées
- [ ] Click "Enregistrer" → changes saved
- [ ] Return to view mode → verify changes persisted

**9. Verify workflow logic:**
- [ ] Musical profile (core business) is 2nd accordion, not 5th
- [ ] All contact info consolidated in single accordion
- [ ] Logical flow: Identity → Artistic → Contact → Relations → Notes

**Expected behavior:**
- 5 accordions all open by default
- Subsections visually separated with borders
- All fields accessible
- Zero data loss from refactoring
- Smooth workflow alignment with studio business process
  </how-to-verify>
  <resume-signal>
Type **"approved"** if accordion reorganization works correctly and follows studio workflow logic.

If issues found, describe them (e.g., "missing genres field in Profil Artistique", "subsection separators not visible").
  </resume-signal>
</task>

</tasks>

<verification>
**Overall phase validation:**

1. **Accordion count:** ClientEditForm has exactly 5 accordion sections
2. **Workflow order:** Identity → Profil Artistique → Coordonnées → Relations Pro → Notes Studio
3. **Musical profile position:** 2nd accordion (not 5th)
4. **Field grouping:** All music fields in Profil Artistique, all contact in Coordonnées
5. **Zero data loss:** All 50+ fields accessible (phones, emails, streaming, genres, etc.)
6. **TypeScript validation:** `pnpm check` from project root (0 errors)
7. **Production build:** `cd packages/client && pnpm build` (successful)
8. **Visual consistency:** Subsection separators visible, headings clear
</verification>

<success_criteria>
**Phase 26.1 complete when:**

- [x] ClientEditForm.tsx refactored from 7 to 5 accordions
- [x] Accordion order: Identité, Profil Artistique, Coordonnées, Relations Professionnelles, Notes Studio
- [x] Musical profile (streaming + professional + career) fused into 2nd accordion
- [x] Contact info (contact + address) fused into 3rd accordion
- [x] Subsection visual separators added (border-t pt-3 mt-3)
- [x] All existing fields remain accessible (zero data loss)
- [x] TypeScript 0 errors (`pnpm check`)
- [x] Production build successful
- [x] Manual browser testing confirms 5 accordions, studio workflow order
- [x] User approves UX improvement and workflow alignment
- [x] Changes committed to git with atomic commit message
</success_criteria>

<output>
After completion, create `.planning/phases/26.1-reorganisation-accordeons---logique-studio-d'enregistrement/26.1-01-SUMMARY.md`
</output>
