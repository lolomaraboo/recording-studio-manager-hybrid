---
wave: 4
depends_on: [19-02, 19-03]
files_modified:
  - packages/client/src/pages/Clients.tsx
autonomous: false
---

# 19-04: Responsive Testing and Final Polish

Manual testing of responsive breakpoints, TypeScript validation, avatar fallbacks, and visual polish.

## Tasks

<task id="19-04-01">
Test Grid view responsive breakpoints

**Test Cases:**
- **Desktop (1920px):** 4 columns, avatars h-12, cards don't overflow
- **Laptop (1440px):** 3 columns, layout maintains proportion
- **Tablet (768px):** 2 columns, cards stack cleanly
- **Mobile (375px):** 1 column, all text truncates properly

**Manual Testing:**
```bash
# Start dev server
./start.sh

# Open in browser
open http://localhost:5174/clients

# Test with Chrome DevTools:
# - Toggle device toolbar
# - Test breakpoints: 375px, 768px, 1024px, 1440px, 1920px
# - Verify avatar sizes, text truncation, button accessibility
```

**Pass Criteria:**
- No horizontal overflow at any breakpoint
- Avatars remain visible and properly sized
- Stats badges wrap without breaking layout
- Buttons remain accessible (not hidden/cut off)

**Fixes if needed:**
- Add `min-w-0` to flex children to allow truncation
- Adjust `gap-4` to `gap-3` if cards too cramped
- Add `max-w-xs` to cards if they stretch too wide on xl breakpoint
</task>

<task id="19-04-02">
Test Kanban view responsive breakpoints

**Test Cases:**
- **Desktop (1440px+):** 2 columns side-by-side, cards show full context
- **Tablet (768-1023px):** 2 columns side-by-side, tighter spacing
- **Mobile (< 768px):** 1 column stacked (Particuliers above Entreprises)

**Manual Testing:**
```bash
# Same dev server, switch to Kanban view
# Test breakpoints with Chrome DevTools

# Verify:
# - Column headers stack properly on mobile
# - Cards don't overflow horizontally
# - Notes preview truncates at 2 lines
# - Workflow indicators remain aligned
```

**Pass Criteria:**
- Mobile shows vertical stack (Particuliers → Entreprises)
- All text remains readable at all sizes
- Icons don't break to new lines
- Border-t separators visible

**Fixes if needed:**
- Adjust `lg:grid-cols-2` to always show 2 columns on desktop
- Add `grid-cols-1` for mobile stacking
- Reduce `space-y-4` to `space-y-3` if vertical spacing too large
</task>

<task id="19-04-03">
Verify TypeScript compilation and fix any type errors

**Command:**
```bash
pnpm check
```

**Expected Output:**
```
Checking client...
✓ Type checking passed (0 errors)
Checking server...
✓ Type checking passed (0 errors)
Checking database...
✓ Type checking passed (0 errors)
```

**Common Type Errors to Fix:**
- Missing Avatar import: `import { Avatar, AvatarImage, AvatarFallback } from "@/components/ui/avatar"`
- Missing Building2 import: `import { Building2 } from "lucide-react"`
- Missing MapPin import: `import { MapPin } from "lucide-react"`
- Missing getInitials import: `import { getInitials } from "@/lib/utils"`
- Incorrect date-fns format import: Ensure `import { format } from "date-fns"` and `import { fr } from "date-fns/locale"` are present

**Fix Strategy:**
1. Run `pnpm check`
2. Read error messages carefully
3. Add missing imports
4. Fix type mismatches (e.g., string vs string | undefined)
5. Re-run until 0 errors
</task>

<task id="19-04-04">
Test avatar fallback with clients lacking avatarUrl/logoUrl

**Test Data:**
- Ensure test database has mix of clients:
  - Some with avatarUrl (individuals)
  - Some with logoUrl (companies)
  - Some with neither (should show initials)

**Manual Verification:**
```bash
# In dev environment, check Clients page
# Visual inspection:
# - Clients with images: Image displays
# - Clients without images: Initials display (e.g., "ED", "SP")
# - Initials are uppercase, 2 characters max
# - Fallback background is bg-muted (gray)
```

**Pass Criteria:**
- No broken image icons (alt text showing)
- Initials are readable and properly styled
- Fallback background is consistent

**Debugging:**
- If images don't load: Check avatarUrl/logoUrl paths in database
- If initials wrong: Test getInitials function separately
- If fallback styling off: Verify AvatarFallback className
</task>

<task id="19-04-05">
Final visual polish and transition effects

**Areas to Polish:**

1. **Hover states:**
   - Grid cards: `hover:shadow-md transition-shadow`
   - Kanban cards: `hover:shadow-lg transition-shadow`
   - Links: `hover:underline`

2. **Icon consistency:**
   - All h-3 w-3 for inline icons (Phone, Mail, Eye, MapPin)
   - All h-5 w-5 for column header icons (Users, Building2)
   - All text-primary for header icons

3. **Spacing consistency:**
   - CardHeader pb-3 (Grid) vs pb-2 (Kanban)
   - CardContent space-y-2 (Grid) vs space-y-3 (Kanban)
   - gap-2 for inline elements, gap-3 for sections

4. **Color coding:**
   - VIP stars: text-yellow-500 fill-yellow-500
   - High receivables: text-orange-600 border-orange-600
   - Muted text: text-muted-foreground

**Manual Verification:**
- Hover over cards: Shadow transition smooth (no flicker)
- Hover over links: Underline appears instantly
- Colors match existing UI theme
- Spacing feels consistent across both views

**Pass Criteria:**
- All transitions feel smooth (200-300ms)
- No jarring visual changes
- Consistent with UI-DESIGN-GUIDELINES.md patterns
</task>

## Verification Criteria

- [ ] All responsive breakpoints tested (375px, 768px, 1024px, 1440px, 1920px)
- [ ] TypeScript compiles with 0 errors (pnpm check passes)
- [ ] Avatar fallback shows proper initials for clients without images
- [ ] Hover states smooth with proper transitions
- [ ] No horizontal overflow at any breakpoint
- [ ] All icons properly sized and colored
- [ ] Human validation complete (user approves visual design)

## must_haves

- Manual testing completed at all 5 breakpoints (both views)
- TypeScript 0 errors (pnpm check passes)
- Avatar fallbacks working (initials display)
- Visual polish complete (hover, spacing, colors)
- User approval obtained before marking complete
