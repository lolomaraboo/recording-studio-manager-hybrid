---
wave: 2
depends_on: [19-01]
files_modified:
  - packages/client/src/pages/Clients.tsx
autonomous: true
---

# 19-02: Refactor Grid View for Compact Scanning

Transform Grid view into compact 3-4 column layout with prominent avatars, minimal info, and stats badges for quick scanning.

## Tasks

<task id="19-02-01">
Update Grid view layout to 3-4 responsive columns

**Current (line 506):**
```tsx
<div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
```

**Target:**
```tsx
<div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
```

**Rationale:**
- xl:grid-cols-4 provides maximum density on large screens (1920px+)
- Maintains 3 columns on desktop (1024-1536px)
- 2 columns on tablet (768-1023px)
- 1 column on mobile (<768px)

**Verification:**
- Responsive breakpoints tested in browser DevTools
- Cards maintain readable width at all breakpoints
</task>

<task id="19-02-02">
Add Avatar component with prominent sizing to Grid cards

**Location:** Inside Card component (after line 508), replace lines 509-529

**Implementation:**
```tsx
import { Avatar, AvatarImage, AvatarFallback } from "@/components/ui/avatar";
import { getInitials } from "@/lib/utils";
import { Star } from "lucide-react";

// Inside map function (line 509):
<Card key={client.id} className="hover:shadow-md transition-shadow">
  <CardHeader className="pb-3">
    <div className="flex items-center gap-3">
      {/* Prominent avatar - primary visual anchor */}
      <Avatar className="h-12 w-12">
        <AvatarImage src={client.type === 'company' ? client.logoUrl : client.avatarUrl} />
        <AvatarFallback className="text-sm font-semibold">
          {getInitials(client.name)}
        </AvatarFallback>
      </Avatar>

      <div className="flex-1 min-w-0">
        <CardTitle className="text-base flex items-center gap-2">
          <span className="truncate">{client.name}</span>
          {client.accountsReceivable > 100000 && (
            <Star className="h-4 w-4 text-yellow-500 fill-yellow-500 flex-shrink-0" />
          )}
        </CardTitle>
        {client.artistName && (
          <CardDescription className="text-sm truncate">
            {client.artistName}
          </CardDescription>
        )}
      </div>

      {/* Type badge - visual category indicator */}
      <Badge
        variant={client.type === 'company' ? 'default' : 'secondary'}
        className="flex-shrink-0"
      >
        {client.type === 'company' ? 'Entreprise' : 'Particulier'}
      </Badge>
    </div>
  </CardHeader>
  {/* CardContent continues in next task... */}
</Card>
```

**Rationale:**
- Avatar h-12 w-12 (48px) is prominent without overwhelming (research guideline)
- Conditional src: companies use logoUrl, individuals use avatarUrl
- Fallback shows initials with proper styling
- Text truncation prevents card expansion
- VIP indicator (accountsReceivable > 1000€) shows star icon

**Verification:**
- Avatars load correctly for clients with avatarUrl/logoUrl
- Fallback shows proper initials for clients without images
- Card height remains consistent across all clients
- Text truncation works on small screens
</task>

<task id="19-02-03">
Replace verbose contact info with compact primary contact and stats badges

**Current (lines 530-552):** Shows all phone, email, address fields

**Target (replace CardContent section):**
```tsx
<CardContent className="space-y-2">
  {/* Primary contact only - minimal scanning */}
  {client.phone && (
    <div className="flex items-center gap-2 text-sm text-muted-foreground">
      <Phone className="h-3 w-3 flex-shrink-0" />
      <a
        href={`tel:${client.phone}`}
        className="hover:underline truncate"
        onClick={(e) => e.stopPropagation()}
      >
        {client.phone}
      </a>
    </div>
  )}

  {/* Stats badges - compact indicators */}
  <div className="flex gap-2 flex-wrap">
    <Badge variant="outline" className="text-xs">
      {client.sessionsCount} sessions
    </Badge>
    {client.accountsReceivable > 0 && (
      <Badge
        variant="outline"
        className={cn(
          "text-xs",
          client.accountsReceivable > 100000 ? "text-orange-600 border-orange-600" : ""
        )}
      >
        {(client.accountsReceivable / 100).toFixed(0)}€
      </Badge>
    )}
  </div>

  {/* Minimal action button */}
  <Button
    variant="ghost"
    size="sm"
    className="w-full"
    asChild
  >
    <Link to={`/clients/${client.id}`}>
      <Eye className="h-3 w-3 mr-1" /> Voir
    </Link>
  </Button>
</CardContent>
```

**Rationale:**
- Grid view = quick scanning, not detailed analysis
- Show only primary phone (most critical contact method)
- Stats badges provide visual at-a-glance metrics
- Orange color for high accounts receivable (>1000€) draws attention
- Compact "Voir" button (not "Voir détails")

**Verification:**
- Only one contact method shown (phone prioritized)
- Stats badges wrap properly on narrow cards
- Button remains accessible and clickable
- Color indicators work for high receivables
</task>

## Verification Criteria

- [ ] Grid view uses 3-4 responsive columns (md:2 lg:3 xl:4)
- [ ] Avatars prominent (h-12 w-12) with proper fallback (initials)
- [ ] Minimal info shown (name, type badge, one contact, stats)
- [ ] Cards maintain consistent height
- [ ] All text truncates to prevent overflow
- [ ] TypeScript compilation passes (pnpm check)
- [ ] No console errors in browser

## must_haves

- Grid layout responsive: 1 col mobile, 2 tablet, 3 desktop, 4 xl screens
- Avatars show images or initials fallback
- Cards show compact info (name, badge, phone, stats)
- Button text "Voir" (compact, not "Voir détails")
- VIP star indicator for high-value clients (>1000€ receivables)
